<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
		<meta name="theme-color" content="#c41e3a">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="apple-mobile-web-app-title" content="çº¢è‰²çš®å¡">
		<link rel="icon" type="image/png" href="favicon.png">
		<link rel="apple-touch-icon" href="favicon.png">
		<link rel="manifest" href="manifest.json">
		<title>æ— äººçº¢è‰²çš®å¡çš„å®‰ä¿ä¹‹æ—…</title>
		<!-- è®¾å¤‡æ£€æµ‹ï¼šå°½æ—©æ³¨å…¥ï¼Œé¿å…é—ªçƒ -->
		<script src="js/device-adapt.js"></script>
		<!-- å¼•å…¥tailwindcss -->
		<script src="https://cdn.tailwindcss.com"></script>
		<!-- æ–‡å­—æ•ˆæœ -->
		<script>
			tailwind.config = {
				theme: {
					extend: {
						fontFamily: {
							'chinese': ['Microsoft YaHei', 'SimHei', 'monospace'],
						},
						animation: {
							'road-move': 'roadMove 2s linear infinite',
							'truck-glow': 'truckGlow 1.5s ease-in-out infinite',
						},
						keyframes: {
							roadMove: {
								'0%': {
									transform: 'translateX(50%)'
								},
								'100%': {
									transform: 'translateX(-50%)'
								},
							},
							truckGlow: {
								'0%, 100%': {
									textShadow: '0 0 10px rgba(196, 30, 58, 0.8)'
								},
								'50%': {
									textShadow: '0 0 20px rgba(196, 30, 58, 1), 0 0 30px rgba(196, 30, 58, 0.5)'
								},
							},
						},
					},
				},
			}
		</script>
		<style>
			body {
				background: #171717;
				animation: pageFadeIn 0.6s ease-out;
			}
			@keyframes pageFadeIn {
				from { opacity: 0; }
				to { opacity: 1; }
			}
			/* äº‹ä»¶æ–‡æœ¬æ¡†æ»šåŠ¨æ¡ï¼šä¸ç”»é¢é£æ ¼ä¸€è‡´ï¼ˆæ·±åº• + çº¢è‰²æ»‘å—ï¼‰ */
			.text-area-scroll {
				scrollbar-width: thin;
				scrollbar-color: #c41e3a #1f2937;
			}
			.text-area-scroll::-webkit-scrollbar {
				width: 10px;
			}
			.text-area-scroll::-webkit-scrollbar-track {
				background: #1f2937;
				border-radius: 0 10px 10px 0;
			}
			.text-area-scroll::-webkit-scrollbar-thumb {
				background: #c41e3a;
				border-radius: 10px;
			}
			.text-area-scroll::-webkit-scrollbar-thumb:hover {
				background: #e63950;
			}
			/* æ–°å…ƒç´ ç¼“åŠ¨ï¼šæ¸æ˜¾ */
			@keyframes itemFadeIn {
				from { opacity: 0; transform: translateY(-4px); }
				to { opacity: 1; transform: translateY(0); }
			}
			.passenger-item-enter {
				animation: itemFadeIn 0.3s ease-out forwards;
			}
			.inventory-item-enter {
				animation: itemFadeIn 0.3s ease-out forwards;
			}
			#inventory-list [draggable="true"] {
				cursor: grab;
			}
			.inventory-item-dragging {
				opacity: 0.5;
				cursor: grabbing;
			}
			.inventory-item-drop-target {
				box-shadow: 0 0 0 2px #c41e3a;
			}
			/* åå¤‡ç®±æ’å…¥ä½å ä½æ¡ï¼šç¼“åŠ¨è®©ä½ */
			.inventory-drop-placeholder {
				flex-shrink: 0;
				min-height: 0;
				height: 0;
				overflow: hidden;
				transition: height 0.2s ease-out, min-height 0.2s ease-out;
				border: 2px dashed rgba(196, 30, 58, 0.5);
				border-radius: 8px;
				background: rgba(196, 30, 58, 0.08);
			}
			.inventory-drop-placeholder.active {
				min-height: 52px;
				height: 52px;
			}
			.inventory-item-row {
				transition: margin-top 0.2s ease-out, margin-bottom 0.2s ease-out, transform 0.2s ease-out;
			}
			/* è€ä¹…å˜åŠ¨æ—¶å±å¹•æŠ–åŠ¨ */
			@keyframes screenShake {
				0%, 100% { transform: translate(0, 0); }
				15% { transform: translate(-4px, 2px); }
				30% { transform: translate(4px, -2px); }
				45% { transform: translate(-3px, -2px); }
				60% { transform: translate(3px, 2px); }
				75% { transform: translate(-2px, 1px); }
			}
			#game-canvas.screen-shake {
				animation: screenShake 0.45s ease-out !important;
			}
			/* ç‡ƒæ²¹â‰¤5æ—¶ï¼šæš—çº¢è‰²é—ªçƒ */
			@keyframes fuelLowFlash {
				0%, 100% { box-shadow: inset 0 0 80px rgba(80, 0, 0, 0.4); }
				50% { box-shadow: inset 0 0 120px rgba(120, 0, 0, 0.8); }
			}
			#game-canvas.fuel-low-flash {
				animation: fuelLowFlash 0.7s ease-in-out infinite;
			}
			/* è€ä¹…â‰¤50æ—¶ï¼šæ•…éšœç‰¹æ•ˆï¼ˆé—ªçƒ + è‰²å + è½»å¾®ä½ç§»ï¼‰ */
			@keyframes durabilityGlitch {
				0%, 85%, 100% { filter: none; transform: translate(0, 0); }
				87% { filter: hue-rotate(5deg) contrast(1.1); transform: translate(-4px, 0); }
				89% { filter: hue-rotate(-8deg) contrast(1.15); transform: translate(3px, 2px); }
				91% { filter: hue-rotate(3deg); transform: translate(-2px, -1px); }
				93% { filter: hue-rotate(-4deg); transform: translate(2px, 0); }
				95% { filter: none; transform: translate(-1px, 0); }
				97% { filter: hue-rotate(2deg); transform: translate(1px, 0); }
			}
			#game-canvas.durability-glitch {
				animation: durabilityGlitch 2s ease-in-out infinite;
			}
			/* ç‡ƒæ²¹ä¸è€ä¹…åŒæ—¶è§¦å‘æ—¶ï¼Œä¸¤ä¸ªåŠ¨ç”»å¹¶è¡ŒåŠ¨ç”» */
			#game-canvas.fuel-low-flash.durability-glitch {
				animation: fuelLowFlash 0.7s ease-in-out infinite, durabilityGlitch 2s ease-in-out infinite;
			}
			/* æ¸¸æˆç”»é¢ä½œä¸ºå®¹å™¨ï¼Œä¾›äº‹ä»¶å¼¹çª—éšå…¶å°ºå¯¸é€‚é… */
			#game-canvas {
				container-type: size;
				container-name: game;
			}
			/* äº‹ä»¶é€‰æ‹©å¼¹çª—ï¼šéšæ¸¸æˆçª—å£ç¼©æ”¾ï¼Œä¸è¶…å‡ºé®ç½© */
			#event-modal {
				overflow: auto;
				padding: 2%;
				align-items: flex-start;
				justify-content: center;
				animation: eventModalFadeIn 0.25s ease-out both;
			}
			#event-modal.modal-fade-out {
				animation: eventModalFadeOut 0.2s ease-in both;
			}
			#event-modal .event-modal-inner {
				width: 96%;
				max-width: 96%;
				max-height: 96%;
				overflow-y: auto;
				overflow-x: hidden;
				padding: clamp(6px, 2.5cqw, 32px);
				border-radius: clamp(6px, 1.5cqw, 16px);
				box-sizing: border-box;
				animation: eventInnerSlideIn 0.3s cubic-bezier(0.22,1,0.36,1) both;
			}
			#event-modal .event-modal-emoji {
				font-size: clamp(1.25rem, 10cqw, 3.5rem);
				line-height: 1;
				margin-bottom: clamp(4px, 1.5cqh, 16px);
			}
			#event-modal .event-modal-title {
				font-size: clamp(0.875rem, 3.5cqw, 1.5rem);
				margin-bottom: clamp(4px, 1cqh, 8px);
			}
			#event-modal .event-modal-desc {
				font-size: clamp(0.7rem, 2.2cqw, 1rem);
				line-height: 1.4;
				margin-bottom: clamp(8px, 2cqh, 24px);
			}
			#event-modal .event-modal-choice {
				padding: clamp(6px, 1.5cqh, 16px) clamp(10px, 2.5cqw, 24px);
				margin-bottom: clamp(4px, 1cqh, 12px);
			}
			#event-modal .event-modal-choice .choice-title {
				font-size: clamp(0.8rem, 2.8cqw, 1.125rem);
			}
			#event-modal .event-modal-choice .choice-desc {
				font-size: clamp(0.7rem, 2.2cqw, 0.875rem);
			}
			/* äºŒçº§é€‰æ‹©å¼¹çª—ï¼šéšæ¸¸æˆçª—å£ç¼©æ”¾ */
			/* æ‰«é›·å¼¹çª—ï¼šæ·¡å‡ºåŠ¨ç”» */
			#minesweeper-modal.modal-fade-out {
				animation: eventModalFadeOut 0.2s ease-in both;
			}
			#sub-choice-modal {
				overflow: auto;
				padding: 2%;
				animation: eventModalFadeIn 0.25s ease-out both;
			}
			#sub-choice-modal.modal-fade-out {
				animation: eventModalFadeOut 0.2s ease-in both;
			}
			#sub-choice-modal .sub-choice-inner {
				max-width: 96%;
				max-height: 96%;
				padding: clamp(8px, 2.5cqw, 24px);
				overflow-y: auto;
				border-radius: clamp(6px, 1.5cqw, 12px);
				box-sizing: border-box;
				animation: eventInnerSlideIn 0.3s cubic-bezier(0.22,1,0.36,1) both;
			}
			#sub-choice-modal .sub-choice-prompt {
				font-size: clamp(0.75rem, 2.2cqw, 0.875rem);
				margin-bottom: clamp(8px, 2cqh, 16px);
			}
			#sub-choice-modal .sub-choice-option {
				padding: clamp(6px, 1.5cqh, 12px) clamp(10px, 2.5cqw, 16px);
				margin-bottom: clamp(4px, 1cqh, 8px);
				font-size: clamp(0.75rem, 2.2cqw, 0.875rem);
			}
			/* äº‹ä»¶å¼¹çª—æ·¡å…¥æ·¡å‡ºåŠ¨ç”» */
			@keyframes eventModalFadeIn {
				from { opacity: 0; }
				to   { opacity: 1; }
			}
			@keyframes eventModalFadeOut {
				from { opacity: 1; }
				to   { opacity: 0; }
			}
			/* äº‹ä»¶å¼¹çª—å†…å®¹æ»‘å…¥ */
			@keyframes eventInnerSlideIn {
				from { opacity: 0; transform: translateY(18px) scale(0.97); }
				to   { opacity: 1; transform: translateY(0) scale(1); }
			}
			/* æˆå°±è§£é”æç¤ºæ¡†åŠ¨ç”» */
			@keyframes achievementSlideIn {
				from {
					opacity: 0;
					transform: translateX(100%);
				}
				to {
					opacity: 1;
					transform: translateX(0);
				}
			}
			@keyframes achievementSlideOut {
				from {
					opacity: 1;
					transform: translateX(0);
				}
				to {
					opacity: 0;
					transform: translateX(100%);
				}
			}
			/* äº‹ä»¶ä¸»é¢˜ emoji ç²’å­é£˜è½åŠ¨ç”» */
			@keyframes emojiFloat {
				0% {
					opacity: 0;
					transform: translateY(0) rotate(0deg) scale(0.6);
				}
				10% {
					opacity: 0.9;
				}
				50% {
					transform: translateY(45vh) rotate(180deg) scale(1);
					opacity: 0.7;
				}
				100% {
					opacity: 0;
					transform: translateY(95vh) rotate(360deg) scale(0.4);
				}
			}
			/* é›¨æ»´å¿«é€Ÿä¸‹è½åŠ¨ç”» */
			@keyframes emojiRainDrop {
				0% {
					opacity: 0;
					transform: translateY(-5vh) scaleY(1.3);
				}
				8% {
					opacity: 0.85;
				}
				100% {
					opacity: 0;
					transform: translateY(105vh) scaleY(1.3);
				}
			}
			/* é›¾æ°”æ°´å¹³æ¼‚ç§»åŠ¨ç”» */
			@keyframes emojiFogDrift {
				0% {
					opacity: 0;
					transform: translateX(-10vw) translateY(0) scale(1.5);
				}
				15% {
					opacity: 0.6;
				}
				50% {
					opacity: 0.45;
					transform: translateX(15vw) translateY(5vh) scale(2);
				}
				85% {
					opacity: 0.3;
				}
				100% {
					opacity: 0;
					transform: translateX(40vw) translateY(-3vh) scale(1.8);
				}
			}
			/* æ²™å°˜æš´æ¨ªæ‰«åŠ¨ç”» */
			@keyframes emojiSandstorm {
				0% {
					opacity: 0;
					transform: translateX(0) translateY(0) scale(2);
				}
				8% {
					opacity: 0.85;
				}
				50% {
					opacity: 0.7;
					transform: translateX(-55vw) translateY(8vh) scale(2.5);
				}
				85% {
					opacity: 0.4;
				}
				100% {
					opacity: 0;
					transform: translateX(-120vw) translateY(3vh) scale(2);
				}
			}
			/* çå“è·å¾— - å…¨å±ç‰¹æ•ˆæ·¡å…¥ */
			@keyframes treasureOverlayFadeIn {
				0% { opacity: 0; }
				100% { opacity: 1; }
			}
			/* çå“è·å¾— - å…¨å±ç‰¹æ•ˆæ·¡å‡º */
			@keyframes treasureOverlayFadeOut {
				0% { opacity: 1; }
				100% { opacity: 0; }
			}
			/* çå“è·å¾— - æ–‡å­—ä¸Šæµ®å‡ºç° */
			@keyframes treasureTextFloat {
				0% { opacity: 0; transform: translateY(20px) scale(0.8); }
				100% { opacity: 1; transform: translateY(0) scale(1); }
			}
			/* çå“å°çº¢ç‚¹å‘¼å¸ */
			@keyframes treasureDotPulse {
				0%, 100% { opacity: 1; transform: scale(1); }
				50% { opacity: 0.5; transform: scale(1.4); }
			}
			/* é›¾ä¸­äººçš„ç…§ç‰‡ - é¬¼é­‚æ¼‚æµ® */
			@keyframes fogGhostFloat {
				0% { opacity: 0; transform: translateY(0) scale(0.6); }
				15% { opacity: 0.5; }
				50% { opacity: 0.35; transform: translateY(-180px) scale(1); }
				85% { opacity: 0.15; }
				100% { opacity: 0; transform: translateY(-350px) scale(0.7); }
			}
			/* ç½•è§äº‹ä»¶ - åŠ¨æ€å½©è™¹æµå…‰è¾¹æ¡† */
			@keyframes rareEventBorderFlow {
				0%   { border-color: #ff0040; box-shadow: 0 0 20px #ff004060, inset 0 0 20px #ff004020; }
				16%  { border-color: #ff8800; box-shadow: 0 0 20px #ff880060, inset 0 0 20px #ff880020; }
				33%  { border-color: #ffdd00; box-shadow: 0 0 20px #ffdd0060, inset 0 0 20px #ffdd0020; }
				50%  { border-color: #00ff88; box-shadow: 0 0 20px #00ff8860, inset 0 0 20px #00ff8820; }
				66%  { border-color: #0088ff; box-shadow: 0 0 20px #0088ff60, inset 0 0 20px #0088ff20; }
				83%  { border-color: #dd00ff; box-shadow: 0 0 20px #dd00ff60, inset 0 0 20px #dd00ff20; }
				100% { border-color: #ff0040; box-shadow: 0 0 20px #ff004060, inset 0 0 20px #ff004020; }
			}
			.rare-event-border {
				animation: rareEventBorderFlow 3s linear infinite !important;
				border-width: 3px !important;
				border-style: solid !important;
			}
			/* ç½•è§äº‹ä»¶ - å°ä¸‘ä¸»é¢˜è¾¹æ¡†ï¼ˆæ›´ç–¯ç‹‚ï¼‰ */
			@keyframes clownBorderChaos {
				0%   { border-color: #ff0040; box-shadow: 0 0 30px #ff004080, inset 0 0 15px #ff004030; transform: rotate(0deg); }
				10%  { border-color: #ffdd00; box-shadow: 0 0 25px #ffdd0080; transform: rotate(0.3deg); }
				20%  { border-color: #00ff88; box-shadow: 0 0 35px #00ff8880; transform: rotate(-0.5deg); }
				30%  { border-color: #ff00ff; box-shadow: 0 0 30px #ff00ff80; transform: rotate(0.4deg); }
				40%  { border-color: #00ddff; box-shadow: 0 0 25px #00ddff80; transform: rotate(-0.2deg); }
				50%  { border-color: #ff8800; box-shadow: 0 0 40px #ff880090, inset 0 0 20px #ff880040; transform: rotate(0.6deg); }
				60%  { border-color: #88ff00; box-shadow: 0 0 30px #88ff0080; transform: rotate(-0.3deg); }
				70%  { border-color: #ff0088; box-shadow: 0 0 25px #ff008880; transform: rotate(0.2deg); }
				80%  { border-color: #8800ff; box-shadow: 0 0 35px #8800ff80; transform: rotate(-0.4deg); }
				90%  { border-color: #ff4400; box-shadow: 0 0 30px #ff440080; transform: rotate(0.3deg); }
				100% { border-color: #ff0040; box-shadow: 0 0 30px #ff004080, inset 0 0 15px #ff004030; transform: rotate(0deg); }
			}
			.clown-event-border {
				animation: clownBorderChaos 2s linear infinite !important;
				border-width: 3px !important;
				border-style: solid !important;
			}
			/* æ—¶é—´é“¶è¡Œæ•…éšœç‰¹æ•ˆ */
			@keyframes timeBankGlitch {
				0%, 100% { filter: none; transform: translate(0,0) skew(0deg); opacity: 1; }
				5%  { filter: hue-rotate(180deg) saturate(3) contrast(2); transform: translate(-8px, 0) skew(-2deg); }
				6%  { filter: hue-rotate(90deg) invert(0.3); transform: translate(5px, -3px) skew(1deg); }
				7%  { filter: none; transform: translate(0,0) skew(0deg); }
				20% { filter: hue-rotate(270deg) contrast(1.5); transform: translate(4px, 2px); }
				21% { filter: none; transform: translate(-2px, 0); }
				22% { filter: none; transform: translate(0,0); }
				50% { filter: hue-rotate(180deg) saturate(2); transform: translate(-5px, 3px) skew(0.5deg); }
				51% { filter: invert(0.2) hue-rotate(90deg); transform: translate(3px, -2px); }
				52% { filter: none; transform: translate(0,0); }
				80% { filter: hue-rotate(360deg) contrast(2); transform: translate(6px, -4px) skew(-1.5deg); }
				81% { filter: none; transform: translate(0,0); }
			}
			@keyframes timeBankGlitchFull {
				0%, 100% { filter: none; transform: translate(0,0); background-color: transparent; }
				3%  { filter: hue-rotate(180deg) saturate(5) contrast(3) invert(0.1); transform: translate(-12px, 0) skew(-3deg); background-color: rgba(0,229,255,0.05); }
				4%  { filter: hue-rotate(90deg) invert(0.5) contrast(2); transform: translate(8px, -5px); background-color: rgba(255,0,128,0.08); }
				5%  { filter: none; transform: translate(0,0); background-color: transparent; }
				15% { filter: hue-rotate(270deg) saturate(3); transform: translate(6px, 3px); }
				16% { filter: invert(0.3) hue-rotate(45deg); transform: translate(-4px, 2px) skew(1deg); }
				17% { filter: none; transform: translate(0,0); }
				45% { filter: hue-rotate(180deg) contrast(4) saturate(2); transform: translate(-15px, 5px) skew(-2deg); background-color: rgba(0,229,255,0.1); }
				46% { filter: invert(0.4) contrast(3); transform: translate(10px, -3px); background-color: rgba(255,0,255,0.1); }
				47% { filter: none; transform: translate(0,0); background-color: transparent; }
				70% { filter: hue-rotate(90deg) saturate(4) contrast(2); transform: translate(-8px, 4px) skew(1.5deg); }
				71% { filter: none; transform: translate(0,0); }
				90% { filter: hue-rotate(315deg) invert(0.2) contrast(2.5); transform: translate(10px, -6px); }
				91% { filter: none; transform: translate(0,0); }
			}
			/* æ—¶é—´é“¶è¡Œæ¨¡æ€æ¡†è¾¹æ¡†åŠ¨ç”» */
			@keyframes timeBankBorderFlow {
				0%   { border-color: #00e5ff; box-shadow: 0 0 20px #00e5ff60, inset 0 0 15px #00e5ff20; }
				25%  { border-color: #7b2fff; box-shadow: 0 0 25px #7b2fff60, inset 0 0 15px #7b2fff20; }
				50%  { border-color: #00fff7; box-shadow: 0 0 20px #00fff760, inset 0 0 15px #00fff720; }
				75%  { border-color: #ff00aa; box-shadow: 0 0 25px #ff00aa60, inset 0 0 15px #ff00aa20; }
				100% { border-color: #00e5ff; box-shadow: 0 0 20px #00e5ff60, inset 0 0 15px #00e5ff20; }
			}
			.time-bank-event-border {
				animation: timeBankBorderFlow 2s linear infinite !important;
				border-width: 3px !important;
				border-style: solid !important;
			}
			/* ============================================================
			   å‘½è¿è½®ç›˜ - é‡‘è‰²æµå…‰è¾¹æ¡† + è½¬ç›˜ UI
			   ============================================================ */
			@keyframes fateRouletteBorder {
				0%   { border-color: #ffd700; box-shadow: 0 0 25px #ffd70070, inset 0 0 15px #ffd70025; }
				25%  { border-color: #ff8c00; box-shadow: 0 0 30px #ff8c0070, inset 0 0 15px #ff8c0025; }
				50%  { border-color: #fffacd; box-shadow: 0 0 25px #fffacd70, inset 0 0 15px #fffacd25; }
				75%  { border-color: #ff8c00; box-shadow: 0 0 30px #ff8c0070, inset 0 0 15px #ff8c0025; }
				100% { border-color: #ffd700; box-shadow: 0 0 25px #ffd70070, inset 0 0 15px #ffd70025; }
			}
			/* è½¬ç›˜å†…å¡ç‰‡å…¥åœºï¼šä»å°æ”¾å¤§ + æ·¡å…¥ */
			@keyframes fateRouletteCardIn {
				0%   { opacity: 0; transform: scale(0.55); }
				60%  { opacity: 1; transform: scale(1.03); }
				100% { opacity: 1; transform: scale(1); }
			}
			/* è½¬ç›˜å†…å¡ç‰‡é€€åœºï¼šç¼©å°æ·¡å‡º */
			@keyframes fateRouletteCardOut {
				0%   { opacity: 1; transform: scale(1); }
				100% { opacity: 0; transform: scale(0.6); }
			}
			/* äº‹ä»¶é€‰æ‹©æ¡†åŠå…¶ä»– UI åœ¨è½¬ç›˜å¼€å¯æ—¶æ·¡å‡º */
			@keyframes fateOverlayFadeOut {
				0%   { opacity: 1; pointer-events: auto; }
				100% { opacity: 0; pointer-events: none; }
			}
			@keyframes fateOverlayFadeIn {
				0%   { opacity: 0; }
				100% { opacity: 1; }
			}
			/* è½¬ç›˜é®ç½©å±‚æœ¬èº«æ·¡å…¥ */
			@keyframes fateModalBgIn {
				0%   { opacity: 0; }
				100% { opacity: 1; }
			}
			@keyframes fateModalBgOut {
				0%   { opacity: 1; }
				100% { opacity: 0; }
			}
			/* ä¸ºè¢«æ·¡å‡ºçš„å¤–å±‚ UI å…ƒç´ åŠ çš„è¿‡æ¸¡ç±» */
			.fate-roulette-dim-out {
				animation: fateOverlayFadeOut 0.55s ease forwards !important;
				pointer-events: none !important;
			}
			.fate-roulette-dim-in {
				animation: fateOverlayFadeIn 0.45s ease forwards !important;
			}
			.fate-roulette-border {
				animation: fateRouletteBorder 1.8s linear infinite !important;
				border-width: 3px !important;
				border-style: solid !important;
			}
			/* è½¬ç›˜å…¨å±é®ç½©ï¼ˆè¦†ç›–æ•´ä¸ªè§†å£ï¼Œä¸åªæ˜¯ canvasï¼‰ */
			#fate-roulette-modal {
				position: fixed;
				inset: 0;
				background: rgba(2, 1, 0, 0.0);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 9999;
			}
			#fate-roulette-inner {
				background: #100d00;
				border: 3px solid #ffd700;
				border-radius: 20px;
				padding: 28px 28px 24px;
				width: min(96vw, 520px);
				max-height: 96vh;
				overflow-y: auto;
				box-shadow: 0 0 80px rgba(255,215,0,0.45), 0 0 160px rgba(255,140,0,0.2);
				text-align: center;
				position: relative;
			}
			/* è½¬ç›˜ç”»å¸ƒ */
			#fate-wheel-canvas {
				display: block;
				margin: 0 auto 14px;
				border-radius: 50%;
				box-shadow: 0 0 40px rgba(255,215,0,0.6), 0 0 80px rgba(255,140,0,0.35);
			}
			/* æŒ‡é’ˆ */
			#fate-wheel-pointer {
				position: absolute;
				top: 24px;
				left: 50%;
				transform: translateX(-50%);
				font-size: 2rem;
				filter: drop-shadow(0 0 8px #ffd700);
				pointer-events: none;
				z-index: 2;
				line-height: 1;
			}
			@keyframes wheelSpinResult {
				0%   { transform: translateX(-50%) rotate(0deg); }
				50%  { transform: translateX(-50%) rotate(8deg); }
				100% { transform: translateX(-50%) rotate(-5deg); }
			}
			#fate-roulette-btn {
				margin-top: 14px;
				padding: 12px 40px;
				background: linear-gradient(135deg, #ffd700, #ff8c00);
				color: #1a0d00;
				font-weight: 900;
				font-size: 1.1rem;
				border: none;
				border-radius: 9999px;
				cursor: pointer;
				transition: filter 0.2s, transform 0.1s;
				box-shadow: 0 0 24px rgba(255,215,0,0.55);
			}
			#fate-roulette-btn:hover:not(:disabled) { filter: brightness(1.15); }
			#fate-roulette-btn:active:not(:disabled) { transform: scale(0.96); }
			#fate-roulette-btn:disabled { opacity: 0.5; cursor: not-allowed; }
			/* ============================================================
			   å°ä¸‘ä¹‹å¤œ - å…¨é¡µå½©è™¹ + game-canvas æŠ–åŠ¨
			   æŠ–åŠ¨å¹…åº¦/é€Ÿåº¦å‡ä¸ºåŸç‰ˆ 50%
			   ============================================================ */
			@keyframes clownCanvasShake {
				0%,100% { transform: translate(0,0) rotate(0deg); }
				5%  { transform: translate(-1.5px, 1px) rotate(-0.2deg); }
				10% { transform: translate(2px,-1px) rotate(0.175deg); }
				15% { transform: translate(-1px, 1.5px) rotate(-0.125deg); }
				20% { transform: translate(1.5px,-0.5px) rotate(0.25deg); }
				25% { transform: translate(-2px, 0.5px) rotate(-0.15deg); }
				30% { transform: translate(1px, 1.5px) rotate(0.125deg); }
				35% { transform: translate(-1.5px,-1px) rotate(-0.275deg); }
				40% { transform: translate(1.5px, 0.5px) rotate(0.175deg); }
				45% { transform: translate(-0.5px,-1.5px) rotate(-0.1deg); }
				50% { transform: translate(1px, 1px) rotate(0.3deg); }
				55% { transform: translate(-1.5px,-0.5px) rotate(-0.2deg); }
				60% { transform: translate(0.5px, 1.5px) rotate(0.075deg); }
				65% { transform: translate(-1px,-1px) rotate(-0.175deg); }
				70% { transform: translate(1.5px, 1px) rotate(0.25deg); }
				75% { transform: translate(-1px,-1px) rotate(-0.15deg); }
				80% { transform: translate(2px,-0.25px) rotate(0.2deg); }
				85% { transform: translate(-1px, 0.5px) rotate(-0.25deg); }
				90% { transform: translate(1px,-1px) rotate(0.125deg); }
				95% { transform: translate(-1.5px, 0.75px) rotate(-0.075deg); }
			}
			@keyframes clownRainbowFilter {
				0%   { filter: hue-rotate(0deg)   saturate(1.8) brightness(1.1); }
				16%  { filter: hue-rotate(60deg)  saturate(2.2) brightness(1.05); }
				33%  { filter: hue-rotate(120deg) saturate(1.9) brightness(1.15); }
				50%  { filter: hue-rotate(180deg) saturate(2.5) brightness(1.08); }
				66%  { filter: hue-rotate(240deg) saturate(2.0) brightness(1.12); }
				83%  { filter: hue-rotate(300deg) saturate(2.3) brightness(1.06); }
				100% { filter: hue-rotate(360deg) saturate(1.8) brightness(1.1); }
			}
			/* body åªåšå…¨é¡µå½©è™¹æ»¤é•œï¼Œä¸åš transformï¼ˆé¿å…äº‹ä»¶å¼¹çª—è·ŸæŠ–ï¼‰ */
			body.clown-active {
				animation: clownRainbowFilter 0.7s linear infinite !important;
			}
			/* game-canvas æ‰¿æ‹…æŠ–åŠ¨ï¼ˆå‘¨æœŸ 0.525s = åŸ 0.35s Ã— 1.5ï¼Œå³æ…¢50%ï¼‰ */
			#game-canvas.clown-canvas-shake {
				animation: clownCanvasShake 0.525s ease-in-out infinite;
				transform-origin: center center;
			}
			/* event-modal æ˜¯ game-canvas çš„å­å…ƒç´ ï¼ŒJS RAF å®æ—¶åå‘è¡¥å¿ä¿æŒé™æ­¢ */
			#game-canvas.clown-canvas-shake #event-modal {
				will-change: transform;
			}

			/* ============================================================
			   æ—¶é—´é“¶è¡Œ - æ—¶é’Ÿè™šå½±å±‚ & èƒŒæ™¯è„‰å†²
			   ============================================================ */
			#time-bank-clock-ghost {
				position: fixed;
				inset: 0;
				pointer-events: none;
				z-index: 9998;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				overflow: hidden;
				gap: 0.5rem;
			}
			.time-ghost-digit {
				font-family: 'Courier New', monospace;
				font-size: clamp(3rem, 12vw, 9rem);
				font-weight: 900;
				letter-spacing: 0.15em;
				color: transparent;
				-webkit-text-stroke: 1px rgba(0, 229, 255, 0.18);
				text-shadow:
					0 0 30px rgba(0,229,255,0.12),
					0 0 60px rgba(0,229,255,0.07),
					2px 2px 0 rgba(255,0,200,0.06),
					-2px -2px 0 rgba(0,255,180,0.06);
				user-select: none;
				line-height: 1;
				mix-blend-mode: screen;
			}
			.time-ghost-date {
				font-family: 'Courier New', monospace;
				font-size: clamp(1rem, 3vw, 2.2rem);
				font-weight: 700;
				letter-spacing: 0.3em;
				color: rgba(0, 229, 255, 0.10);
				text-shadow: 0 0 20px rgba(0,229,255,0.10);
				user-select: none;
				mix-blend-mode: screen;
			}
			@keyframes ghostPulse {
				0%, 100% { opacity: 1; transform: scale(1); }
				50%       { opacity: 0.5; transform: scale(0.997); }
			}
			@keyframes ghostGlitchBurst {
				0%   { -webkit-text-stroke-color: rgba(0,229,255,0.18); transform: translate(0,0); }
				10%  { -webkit-text-stroke-color: rgba(255,0,200,0.35); transform: translate(-4px,2px) skewX(-3deg); }
				11%  { -webkit-text-stroke-color: rgba(0,255,180,0.35); transform: translate(3px,-1px) skewX(2deg); }
				12%  { -webkit-text-stroke-color: rgba(0,229,255,0.18); transform: translate(0,0); }
				40%  { -webkit-text-stroke-color: rgba(0,229,255,0.22); transform: translate(2px,1px); }
				41%  { -webkit-text-stroke-color: rgba(255,0,128,0.30); transform: translate(-3px,2px) skewX(1.5deg); }
				42%  { -webkit-text-stroke-color: rgba(0,229,255,0.18); transform: translate(0,0); }
				100% { -webkit-text-stroke-color: rgba(0,229,255,0.18); transform: translate(0,0); }
			}
			.time-ghost-digit.glitching {
				animation: ghostGlitchBurst 0.6s steps(1) forwards;
			}

			/* ============================================================
			   è™šæ•°ç°è±¡ - æ ¼å¼åŒ–ç‰¹æ•ˆ
			   ============================================================ */
			/* å…¨å±åè‰²è„‰å†²ï¼ˆformat_world é€‰é¡¹è§¦å‘ï¼‰ */
			@keyframes imaginaryInvert {
				0%   { opacity: 0; filter: invert(0) hue-rotate(0deg); }
				8%   { opacity: 1; filter: invert(1) hue-rotate(0deg); }
				14%  { opacity: 1; filter: invert(1) hue-rotate(90deg) saturate(3); }
				20%  { opacity: 1; filter: invert(0) hue-rotate(180deg) contrast(2); }
				26%  { opacity: 1; filter: invert(1) hue-rotate(270deg); }
				32%  { opacity: 1; filter: invert(0) hue-rotate(360deg) saturate(2); }
				38%  { opacity: 1; filter: invert(1) contrast(3) brightness(1.5); }
				44%  { opacity: 1; filter: invert(0) hue-rotate(90deg); }
				50%  { opacity: 1; filter: invert(1) hue-rotate(180deg) saturate(4) contrast(2); }
				60%  { opacity: 1; filter: invert(0) hue-rotate(270deg) contrast(1.5); }
				70%  { opacity: 1; filter: invert(1) hue-rotate(0deg) saturate(2); }
				80%  { opacity: 0.6; filter: invert(0.5) hue-rotate(45deg) contrast(1.2); }
				90%  { opacity: 0.3; filter: invert(0.2) hue-rotate(0deg); }
				100% { opacity: 0; filter: invert(0); }
			}
			#imaginary-format-overlay {
				position: fixed;
				inset: 0;
				z-index: 99998;
				pointer-events: none;
				mix-blend-mode: difference;
				background: white;
				animation: imaginaryInvert 2.4s cubic-bezier(0.4,0,0.2,1) forwards;
			}
			/* åƒç´ ç¢è£‚æ‰«æçº¿ */
			@keyframes imaginaryScanline {
				0%   { transform: translateY(-100%); opacity: 0.8; }
				100% { transform: translateY(110vh); opacity: 0; }
			}
			.imaginary-scanline {
				position: fixed;
				left: 0; right: 0;
				pointer-events: none;
				z-index: 99999;
				mix-blend-mode: screen;
				animation: imaginaryScanline linear forwards;
			}
			/* æ ¼å¼åŒ–å®Œæˆæ—¶çš„é’ç»¿è‰²é—ªå…‰ */
			@keyframes imaginaryFlash {
				0%   { opacity: 0; }
				15%  { opacity: 0.7; }
				40%  { opacity: 0.4; }
				70%  { opacity: 0.2; }
				100% { opacity: 0; }
			}
			#imaginary-flash {
				position: fixed;
				inset: 0;
				z-index: 99997;
				pointer-events: none;
				background: radial-gradient(ellipse at center,
					rgba(34,211,238,0.5) 0%,
					rgba(34,211,238,0.1) 50%,
					transparent 70%);
				animation: imaginaryFlash 1.0s ease-out forwards;
			}
			/* è™šæ•°é€‰æ‹©æ•ˆæœï¼šä»…å¯¹ game-canvas æ–½åŠ åè‰² */
			@keyframes imaginaryCanvasGlitch {
				0%,100% { filter: none; }
				10% { filter: invert(1) hue-rotate(90deg) saturate(3); }
				11% { filter: none; }
				25% { filter: invert(1) hue-rotate(180deg) contrast(2); }
				26% { filter: none; }
				40% { filter: invert(1) saturate(4) brightness(1.3); }
				41% { filter: none; }
				55% { filter: invert(0.8) hue-rotate(270deg); }
				56% { filter: none; }
				70% { filter: invert(1) contrast(1.5); }
				71% { filter: none; }
				85% { filter: invert(0.4) hue-rotate(45deg); }
				86% { filter: none; }
			}
			#game-canvas.imaginary-glitch {
				animation: imaginaryCanvasGlitch 2.4s cubic-bezier(0.4,0,0.2,1) forwards;
			}
			/* æ—¶é—´é“¶è¡ŒèƒŒæ™¯æ‰«æçº¿å å±‚ */
			#time-bank-scanlines {
				position: fixed;
				inset: 0;
				pointer-events: none;
				z-index: 9997;
				background: repeating-linear-gradient(
					to bottom,
					transparent 0px,
					transparent 3px,
					rgba(0, 229, 255, 0.025) 3px,
					rgba(0, 229, 255, 0.025) 4px
				);
				mix-blend-mode: screen;
			}
			@keyframes timeBankScanPulse {
				0%,100% { opacity: 0.6; }
				50%     { opacity: 1; }
			}
			#time-bank-scanlines.active {
				animation: timeBankScanPulse 2s ease-in-out infinite;
			}

			/* è®¾ç½®é¢æ¿æ»‘å—æ ·å¼ */
			.settings-slider {
				-webkit-appearance: none;
				appearance: none;
				height: 6px;
				background: #333;
				border-radius: 3px;
				outline: none;
				cursor: pointer;
			}
			.settings-slider::-webkit-slider-thumb {
				-webkit-appearance: none;
				appearance: none;
				width: 16px;
				height: 16px;
				border-radius: 50%;
				background: #c41e3a;
				border: 2px solid #e74c6f;
				cursor: pointer;
				box-shadow: 0 0 6px rgba(196,30,58,0.5);
			}
			.settings-slider::-moz-range-thumb {
				width: 16px;
				height: 16px;
				border-radius: 50%;
				background: #c41e3a;
				border: 2px solid #e74c6f;
				cursor: pointer;
				box-shadow: 0 0 6px rgba(196,30,58,0.5);
			}

			/* ================================================================
			   ç¨‹åºæ•…éšœå…¨å±ç‰¹æ•ˆ
			   ================================================================ */
			/* ä¸»èŠ±å±å±‚ï¼šå¿«é€Ÿè‰²å + ä½ç§» + é¥±å’Œåº¦çˆ†ç‚¸ */
			@keyframes programErrorGlitch {
				0%   { filter: none; transform: translate(0,0) skew(0deg); clip-path: none; }
				2%   { filter: hue-rotate(90deg) saturate(8) contrast(3) invert(0.15); transform: translate(-18px, 3px) skew(-3deg); }
				3%   { filter: hue-rotate(200deg) saturate(5) contrast(2); transform: translate(12px, -6px) skew(2deg); clip-path: inset(20% 0 30% 0); }
				4%   { filter: none; transform: translate(0,0); clip-path: none; }
				8%   { filter: hue-rotate(270deg) invert(0.4) saturate(10); transform: translate(-8px, 5px); }
				9%   { filter: hue-rotate(0deg) invert(0.5) contrast(4); transform: translate(6px, -4px) skew(1.5deg); clip-path: inset(60% 0 5% 0); }
				10%  { filter: none; transform: translate(0,0); clip-path: none; }
				18%  { filter: saturate(0) contrast(3) brightness(2); transform: translate(0,0); }
				19%  { filter: hue-rotate(180deg) saturate(20) contrast(5); transform: translate(-22px, 0) skew(-4deg); clip-path: inset(10% 0 50% 0); }
				20%  { filter: hue-rotate(90deg) invert(0.3); transform: translate(14px, 8px); clip-path: inset(50% 0 10% 0); }
				21%  { filter: none; transform: translate(0,0); clip-path: none; }
				35%  { filter: hue-rotate(300deg) saturate(6) contrast(2.5); transform: translate(-5px, 2px); }
				36%  { filter: none; transform: translate(0,0); }
				50%  { filter: invert(0.6) hue-rotate(180deg) saturate(15) contrast(4); transform: translate(25px, -10px) skew(-5deg, 1deg); clip-path: inset(0 0 40% 0); }
				51%  { filter: invert(0.2) hue-rotate(90deg); transform: translate(-15px, 8px); clip-path: inset(40% 0 0 0); }
				52%  { filter: none; transform: translate(0,0); clip-path: none; }
				70%  { filter: hue-rotate(45deg) saturate(8) brightness(1.5); transform: translate(-10px, 4px); }
				71%  { filter: none; transform: translate(0,0); }
				85%  { filter: hue-rotate(270deg) saturate(12) contrast(3) invert(0.25); transform: translate(20px, -8px) skew(3deg); clip-path: inset(30% 0 20% 0); }
				86%  { filter: none; transform: translate(0,0); clip-path: none; }
				100% { filter: none; transform: translate(0,0); clip-path: none; }
			}
			/* æ‰«æçº¿æ‰«è¿‡åŠ¨ç”» */
			@keyframes programErrorScanline {
				0%   { top: -8px; opacity: 0.7; }
				100% { top: 110%; opacity: 0; }
			}
			/* ä¹±ç æ–‡å­—æµ®ç° */
			@keyframes programErrorGarble {
				0%   { opacity: 0; transform: translate(var(--gx), var(--gy)) scale(0.8); }
				10%  { opacity: 1; }
				80%  { opacity: 0.8; }
				100% { opacity: 0; transform: translate(var(--gx), var(--gy)) scale(1.1); }
			}
			/* RGB è‰²å·®åˆ†ç¦»å±‚ */
			@keyframes programErrorRgbR {
				0%,100% { transform: translate(0,0); opacity: 0; }
				25% { transform: translate(-6px, 2px); opacity: 0.35; }
				75% { transform: translate(4px, -3px); opacity: 0.25; }
			}
			@keyframes programErrorRgbB {
				0%,100% { transform: translate(0,0); opacity: 0; }
				25% { transform: translate(6px, -2px); opacity: 0.35; }
				75% { transform: translate(-4px, 3px); opacity: 0.25; }
			}
			/* æ•´é¡µç™½è‰²/é’è‰²é—ªçƒ */
			@keyframes programErrorFlash {
				0%   { opacity: 0; }
				5%   { opacity: 0.6; }
				8%   { opacity: 0; }
				30%  { opacity: 0; }
				32%  { opacity: 0.4; }
				34%  { opacity: 0; }
				60%  { opacity: 0; }
				62%  { opacity: 0.7; }
				65%  { opacity: 0; }
				100% { opacity: 0; }
			}
			/* å…¨å±èŠ±å±é®ç½©å®¹å™¨ï¼ˆfixedï¼Œè¦†ç›–æ‰€æœ‰ UIï¼‰ */
			#program-error-overlay {
				position: fixed;
				inset: 0;
				z-index: 99999;
				pointer-events: none;
				overflow: hidden;
			}
			/* ä¸»ä½“èŠ±å±å±‚ */
			#program-error-overlay .pe-glitch-layer {
				position: absolute;
				inset: 0;
				animation: programErrorGlitch 0.8s steps(1) infinite;
				background: transparent;
			}
			/* RGB çº¢è‰²åç§»å±‚ */
			#program-error-overlay .pe-rgb-r {
				position: absolute;
				inset: 0;
				mix-blend-mode: screen;
				background: rgba(255,0,60,0.18);
				animation: programErrorRgbR 0.5s steps(1) infinite;
			}
			/* RGB è“è‰²åç§»å±‚ */
			#program-error-overlay .pe-rgb-b {
				position: absolute;
				inset: 0;
				mix-blend-mode: screen;
				background: rgba(0,200,255,0.18);
				animation: programErrorRgbB 0.5s steps(1) infinite;
			}
			/* å…¨å±é—ªç™½å±‚ */
			#program-error-overlay .pe-flash {
				position: absolute;
				inset: 0;
				background: #00eeff;
				animation: programErrorFlash 1.2s steps(1) infinite;
				opacity: 0;
			}
			/* æ‰«æçº¿ */
			#program-error-overlay .pe-scanline {
				position: absolute;
				left: 0; right: 0;
				height: 6px;
				background: linear-gradient(to bottom, transparent, #00eeff88 50%, transparent);
				animation: programErrorScanline 0.6s linear infinite;
			}
			/* ä¹±ç æ–‡å­— */
			#program-error-overlay .pe-garble {
				position: absolute;
				font-family: monospace;
				font-size: 0.8rem;
				color: #22d3ee;
				white-space: nowrap;
				pointer-events: none;
				animation: programErrorGarble var(--gd) steps(1) infinite var(--gdelay);
				text-shadow: 0 0 6px #22d3ee, 2px 0 #ff004080, -2px 0 #00eeff80;
			}
			/* äº‹ä»¶å†ç¨‹å¼¹çª—åŠ¨ç”» */
			@keyframes jlFadeIn {
				from { opacity: 0; transform: scale(0.97); }
				to   { opacity: 1; transform: scale(1); }
			}
			@keyframes jlFadeOut {
				from { opacity: 1; transform: scale(1); }
				to   { opacity: 0; transform: scale(0.97); }
			}

			/* ================================================================
			   æ—…é€”ç»ˆç‚¹ç»“å±€ ASCII CG
			   ================================================================ */
			@keyframes asciiGlowPulse {
				0%, 100% { text-shadow: 0 0 6px #a78bfa55, 0 0 14px #a78bfa30; }
				50%       { text-shadow: 0 0 12px #a78bfaaa, 0 0 28px #a78bfa55, 0 0 42px #a78bfa22; }
			}
			@keyframes asciiSlideIn {
				from { opacity: 0; transform: translateY(12px) scale(0.97); }
				to   { opacity: 1; transform: translateY(0) scale(1); }
			}
			.journey-end-ascii-wrap {
				overflow: hidden;
				border-radius: 8px;
				background: rgba(13, 6, 30, 0.85);
				border: 1px solid #a78bfa30;
				box-shadow: 0 0 24px #a78bfa18, inset 0 0 20px #a78bfa0a;
				padding: 6px 0 2px;
				animation: asciiSlideIn 0.7s cubic-bezier(0.22, 1, 0.36, 1) both;
			}
			.journey-end-ascii {
				display: block;
				font-family: 'Courier New', Consolas, monospace;
				font-size: clamp(0.42rem, 1.2vw, 0.62rem);
				line-height: 1.55;
				letter-spacing: 0.04em;
				color: #c4b5fd;
				text-align: center;
				white-space: pre;
				margin: 0;
				padding: 4px 8px;
				animation: asciiGlowPulse 2.8s ease-in-out infinite;
				overflow-x: auto;
				scrollbar-width: thin;
				scrollbar-color: #a78bfa40 transparent;
			}

			/* ================================================================
			   ç»“å±€å¼¹çª—è§†è§‰å¢å¼º
			   ================================================================ */
			@keyframes endingModalIn {
				from { opacity: 0; transform: scale(0.94) translateY(20px); }
				to   { opacity: 1; transform: scale(1) translateY(0); }
			}
			.ending-modal-inner {
				animation: endingModalIn 0.45s cubic-bezier(0.22, 1, 0.36, 1) both !important;
				/* ç¡®ä¿å¡ç‰‡å§‹ç»ˆåœ¨ç²’å­ canvas ä¸Šæ–¹ */
				position: relative;
				z-index: 1;
			}
			/* ç»ˆç‚¹äº‹ä»¶ï¼šä¸‰å‰è·¯å…‰æŸåŠ¨ç”» */
			@keyframes jendBeam {
				from { opacity: 0.4; transform: translateX(-50%) rotate(var(--r, 0deg)) scaleY(0.85); }
				to   { opacity: 1.0; transform: translateX(-50%) rotate(var(--r, 0deg)) scaleY(1.0); }
			}
			/* é¸£è°¢å¼¹çª—å…¥åœºåŠ¨ç”» */
			@keyframes creditsModalIn {
				from { opacity: 0; transform: scale(0.93) translateY(16px); }
				to   { opacity: 1; transform: scale(1) translateY(0); }
			}

			/* ================================================================
			   æ•´ä½“ UI è§†è§‰ä¼˜åŒ–
			   ================================================================ */
			/* å±æ€§çŠ¶æ€æ æ‚¬åœé«˜äº® */
			#truck-status-bar > div {
				transition: border-color 0.25s ease, box-shadow 0.25s ease;
			}
			#truck-status-bar > div:hover {
				border-color: #4b5563;
				box-shadow: 0 0 10px rgba(255,255,255,0.04);
			}
			/* ç‡ƒæ²¹/è€ä¹…/èˆ’é€‚è¿›åº¦æ¡å‘å…‰ */
			#fuel-bar        { box-shadow: 0 0 8px rgba(234,179,8,0.5); }
			#durability-bar  { box-shadow: 0 0 8px rgba(74,222,128,0.5); }
			#comfort-bar     { box-shadow: 0 0 8px rgba(96,165,250,0.5); }
			/* é‡Œç¨‹è®°å½•è¡¨å†…éƒ¨è¡Œæ‚¬åœ */
			.mileage-row {
				transition: background 0.2s;
				border-radius: 6px;
				padding: 2px 4px;
			}
			.mileage-row:hover { background: rgba(255,255,255,0.04); }
			/* å³ä¾§é¢æ¿é‡‘å¸è¡ŒæŒ‰é’®ç»Ÿä¸€ transition */
			button { transition: all 0.2s ease; }
			/* ğŸ“œ æ—…é€”å†ç¨‹æŒ‰é’®å¢å¼º */
			#journey-log-btn {
				position: relative;
				overflow: hidden;
			}
			#journey-log-btn::after {
				content: '';
				position: absolute;
				inset: 0;
				background: radial-gradient(circle at center, rgba(196,30,58,0.15) 0%, transparent 70%);
				opacity: 0;
				transition: opacity 0.2s;
			}
			#journey-log-btn:hover::after { opacity: 1; }
			/* æ–‡æœ¬å¯¹è¯åŒºå¢å¼º */
			#textArea {
				border-color: #2d2d3d;
				box-shadow: inset 0 2px 12px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03);
				transition: border-color 0.3s;
			}
			#textArea:hover { border-color: #3d3d55; }
			/* è½¦ä¸Šæˆå‘˜åŒºåŸŸå¢å¼º */
			#passenger-list > div:not(.text-gray-600) {
				transition: transform 0.15s ease, box-shadow 0.15s ease;
			}
			/* game-canvas é˜´å½±å¢å¼ºï¼ˆä¸å½±å“å·²æœ‰ border åŠ¨ç”»ï¼‰ */
			#game-canvas {
				box-shadow: 0 0 40px rgba(196,30,58,0.35), 0 4px 24px rgba(0,0,0,0.6) !important;
			}
			/* åå¤‡ç®±ç‰©å“åˆ—è¡¨åŒºåŸŸå¢å¼º */
			#inventory-list {
				padding-right: 2px;
			}
			/* è®¾ç½®é¢æ¿æ»‘å—è½¨é“å¢å¼º */
			.settings-slider {
				background: linear-gradient(to right, #c41e3a 0%, #333 0%);
				transition: background 0.1s;
			}
			/* æˆå°±å¾½æ ‡æ‚¬åœæ”¾å¤§ */
			.achievement-badge {
				transition: transform 0.2s ease, box-shadow 0.2s ease;
			}
			.achievement-badge:hover {
				transform: scale(1.06);
				box-shadow: 0 0 14px rgba(196,30,58,0.4);
			}

			/* ================================================================
			   ç§»åŠ¨ç«¯å…¨å±€é€‚é…
			   ä¾èµ– device-adapt.js æ³¨å…¥çš„ CSS å˜é‡ï¼ˆ--da-*ï¼‰å’Œ body[data-layout]
			   ================================================================ */

			/* ---------- ç§»åŠ¨ç«¯å…¨å±€åŸºç¡€ ---------- */
			.device-mobile {
				/* é˜²æ­¢ç³»ç»Ÿå­—ä½“ç¼©æ”¾å½±å“å¸ƒå±€ */
				-webkit-text-size-adjust: 100%;
				text-size-adjust: 100%;
			}
			.device-mobile body {
				overflow: hidden !important;
				position: fixed;
				inset: 0;
				padding: 0 !important;
				font-size: var(--da-font-base, 13px);
				/* å®‰å…¨åŒºå†…è¾¹è· */
				padding-top: env(safe-area-inset-top, 0px) !important;
				padding-bottom: env(safe-area-inset-bottom, 0px) !important;
				padding-left: env(safe-area-inset-left, 0px) !important;
				padding-right: env(safe-area-inset-right, 0px) !important;
			}

			/* æ»šåŠ¨æ¡å˜ç»† */
			.device-mobile .text-area-scroll::-webkit-scrollbar { width: 3px; }
			.device-mobile .text-area-scroll::-webkit-scrollbar-thumb { border-radius: 3px; }

			/* æ‰€æœ‰æŒ‰é’®æœ€å°è§¦æ‘¸é«˜åº¦ */
			.device-mobile button { min-height: 28px; }

			/* â”€â”€ ç§»åŠ¨ç«¯å¼¹çª—å…¨å±€çº¦æŸ â”€â”€
			   æ‰€æœ‰ fixed å¼¹çª—å†…å±‚å®¹å™¨ä¸å¾—è¶…å‡ºå±å¹• */
			.device-mobile .fixed > div:not(.absolute.inset-0) {
				max-width: 94vw !important;
				max-height: 88vh !important;
				box-sizing: border-box;
			}
			/* JS åŠ¨æ€åˆ›å»ºçš„å¼¹çª—ï¼ˆinline styleï¼‰ä¹Ÿå—çº¦æŸ */
			.device-mobile #trunk-upgrade-modal > div:last-child,
			.device-mobile #journey-log-modal > div,
			.device-mobile #journey-log-inner,
			.device-mobile #event-modal .event-modal-inner,
			.device-mobile #crafting-modal > div:not(.absolute.inset-0),
			.device-mobile #overweight-modal > div:not(.absolute.inset-0),
			.device-mobile #credits-modal > div,
			.device-mobile #save-load-modal > div:not(.absolute.inset-0),
			.device-mobile #achievement-modal > div:not(.absolute.inset-0) {
				max-width: 94vw !important;
				max-height: 88vh !important;
				overflow-y: auto !important;
				box-sizing: border-box !important;
			}
			/* è®¾ç½®å¼¹çª—ï¼ˆé™æ€ HTMLï¼‰ */
			.device-mobile #settings-modal > div:last-child {
				max-width: 94vw !important;
				max-height: 88vh !important;
				overflow-y: auto;
				padding: 16px !important;
				width: auto !important;
			}

			/* åˆ¶ä½œå° / è¶…è½½ / ç»“å±€ å¼¹çª—å†…å±‚å®½åº¦ä¿åº• */
			.device-mobile #crafting-modal .relative,
			.device-mobile #overweight-modal .relative,
			.device-mobile .ending-modal-inner {
				max-width: 94vw !important;
				box-sizing: border-box !important;
			}
			/* ç»“å±€å¼¹çª—å¡«å……è¿‡å¤§çš„ padding ä¿®æ­£ */
			.device-mobile .ending-modal-inner {
				padding: 20px 16px !important;
				max-height: 92vh !important;
			}

			/* ---------- ç§»åŠ¨ç«¯ï¼š#game-root åŸºç¡€ ---------- */
			.device-mobile #game-root {
				max-width: 100% !important;
				padding: var(--da-pad, 6px) !important;
				gap: var(--da-gap, 6px) !important;
				box-sizing: border-box;
			}

			/* ---------- çŠ¶æ€æ ï¼ˆé€šç”¨ï¼‰ ---------- */
			.device-mobile #truck-status-bar {
				gap: var(--da-gap, 4px);
				margin-bottom: calc(var(--da-gap, 4px) * 0.6);
			}
			.device-mobile #truck-status-bar > div {
				padding: calc(var(--da-pad, 6px) * 0.4) calc(var(--da-pad, 6px) * 0.7);
				font-size: calc(var(--da-font-base, 13px) * 0.88);
				border-radius: var(--da-radius, 8px);
			}
			.device-mobile #truck-status-bar .rounded-full.h-3,
			.device-mobile #truck-status-bar [class*="h-3"] {
				height: var(--da-bar-h, 5px) !important;
			}
			.device-mobile #truck-status-bar span[id$="-text"] {
				font-size: calc(var(--da-font-base, 13px) * 0.78);
				width: auto;
				min-width: 2.5em;
				text-align: right;
			}

			/* ---------- å›°éš¾/è¡°å˜æ ï¼ˆé€šç”¨ï¼‰ ---------- */
			.device-mobile #hard-mode-bar,
			.device-mobile #debuff-bar {
				margin-bottom: calc(var(--da-gap, 4px) * 0.5);
			}
			.device-mobile #hard-mode-bar > div,
			.device-mobile #debuff-bar > div {
				padding: calc(var(--da-pad, 6px) * 0.35) calc(var(--da-pad, 6px) * 0.7);
				font-size: calc(var(--da-font-base, 13px) * 0.82);
				border-radius: var(--da-radius, 8px);
			}

			/* ---------- æ¸¸æˆç”»å¸ƒï¼ˆé€šç”¨ï¼‰ ---------- */
			.device-mobile #game-canvas {
				border-radius: var(--da-radius, 8px) !important;
				border-width: 2px !important;
				flex-shrink: 0;
			}

			/* ---------- æ–‡æœ¬æ¡†ï¼ˆé€šç”¨ï¼‰ ---------- */
			.device-mobile #textArea {
				font-size: calc(var(--da-font-base, 13px) * 0.92);
				padding: calc(var(--da-pad, 6px) * 0.85) var(--da-pad, 8px);
				margin-top: var(--da-gap, 4px);
				border-radius: var(--da-radius, 8px) !important;
			}

			/* ---------- ä¹˜å®¢åŒºï¼ˆé€šç”¨ï¼‰ ---------- */
			.device-mobile #passenger-section {
				margin-top: var(--da-gap, 4px);
				padding: calc(var(--da-pad, 6px) * 0.75) var(--da-pad, 8px);
				border-radius: var(--da-radius, 8px) !important;
			}
			.device-mobile #passenger-section h2 {
				font-size: calc(var(--da-font-base, 13px) * 0.88);
				margin-bottom: calc(var(--da-gap, 4px) * 0.6);
			}
			.device-mobile #passenger-list {
				min-height: 30px;
				gap: calc(var(--da-gap, 4px) * 0.6);
				font-size: calc(var(--da-font-base, 13px) * 0.85);
			}

			/* ---------- å³ä¾§é¢æ¿ï¼ˆé€šç”¨ï¼‰ ---------- */
			.device-mobile #game-right { gap: var(--da-gap, 4px); }
			.device-mobile #game-right .rounded-xl {
				padding: calc(var(--da-pad, 6px) * 0.85) var(--da-pad, 8px);
				border-radius: var(--da-radius, 8px) !important;
			}
			.device-mobile #game-right h2 {
				font-size: calc(var(--da-font-base, 13px) * 1.0) !important;
				margin-bottom: calc(var(--da-gap, 4px) * 0.7) !important;
			}
			.device-mobile #game-right .text-sm,
			.device-mobile #game-right .text-base {
				font-size: calc(var(--da-font-base, 13px) * 0.88) !important;
			}
			.device-mobile #game-right .text-lg { font-size: calc(var(--da-font-base, 13px) * 1.1) !important; }
			.device-mobile #inventory-list { font-size: calc(var(--da-font-base, 13px) * 0.85); }
			.device-mobile #game-right [class*="h-2"],
			.device-mobile #game-right [class*="h-3"] { height: var(--da-bar-h, 5px) !important; }

			/* é‡‘å¸è¡Œ */
			.device-mobile #gold-row { gap: var(--da-gap, 4px); }
			.device-mobile #gold-row > div,
			.device-mobile #gold-row > button {
				padding: calc(var(--da-pad, 6px) * 0.4) calc(var(--da-pad, 6px) * 0.8);
				font-size: calc(var(--da-font-base, 13px) * 0.85);
				border-radius: var(--da-radius, 8px) !important;
			}
			.device-mobile #gold-text { font-size: calc(var(--da-font-base, 13px) * 1.15) !important; }

			/* è¿”å›æŒ‰é’® */
			.device-mobile #game-canvas > button {
				font-size: calc(var(--da-font-base, 13px) * 0.88);
				padding: calc(var(--da-pad, 6px) * 0.6) calc(var(--da-pad, 6px) * 1.4);
				top: 5px !important; left: 5px !important;
			}

			/* å¼¹çª—å†…å­—å· */
			.device-mobile #event-modal .event-modal-inner {
				max-height: 94vh;
				width: 98%;
			}

			/* ================================================================
			   æ¨ªå±æ¨¡å¼  body[data-layout="landscape"]
			   å·¦ä¾§ï¼šæ¸¸æˆåŒºï¼ˆflex:6ï¼‰  å³ä¾§ï¼šåº“å­˜ï¼ˆflex:4ï¼‰
			   ================================================================ */
			.device-mobile body[data-layout="landscape"] {
				display: block;          /* body æœ¬èº«ä¸å†æ˜¯ flexï¼Œç”± #game-root æŒæ§ */
			}
			body[data-layout="landscape"] #game-root {
				display: flex !important;
				flex-direction: row !important;
				align-items: flex-start;
				width: 100%;
				height: 100vh;
				height: 100dvh;
				overflow: hidden;
				padding-top: max(var(--da-pad, 6px), env(safe-area-inset-top, 0px)) !important;
				padding-bottom: max(0px, env(safe-area-inset-bottom, 0px)) !important;
			}

			body[data-layout="landscape"] #game-left {
				flex: 6;
				min-width: 0;
				display: flex;
				flex-direction: column;
				height: 100%;
				overflow: hidden;
			}

			body[data-layout="landscape"] #game-right {
				flex: 4;
				min-width: 0;
				height: 100%;
				overflow-y: auto;
				overflow-x: hidden;
				display: flex;
				flex-direction: column;
			}

			/* æ¨ªå±ï¼šç”»å¸ƒæ’‘æ»¡å·¦åˆ—å‰©ä½™é«˜åº¦ */
			body[data-layout="landscape"] #game-canvas {
				height: var(--da-canvas-h, 200px) !important;
				aspect-ratio: unset !important;
				flex-shrink: 0;
				width: 100%;
			}

			/* æ¨ªå±ï¼šæ–‡æœ¬æ¡†æ›´çŸ® */
			body[data-layout="landscape"] #textArea {
				min-height: 50px !important;
				max-height: 16vh !important;
			}

			/* æ¨ªå±ï¼šä¹˜å®¢åŒºæ›´ç´§å‡‘ */
			body[data-layout="landscape"] #passenger-section {
				flex-shrink: 0;
			}
			body[data-layout="landscape"] #passenger-list {
				min-height: 24px;
			}

			/* æ¨ªå±ï¼šåå¤‡ç®±å¡«å……å‰©ä½™ç©ºé—´ */
			body[data-layout="landscape"] #game-right > div:last-child {
				flex: 1;
				overflow: hidden;
				display: flex;
				flex-direction: column;
			}

			/* ================================================================
			   ç«–å±æ¨¡å¼  body[data-layout="portrait"]
			   ä¸Šæ–¹ï¼šæ¸¸æˆåŒºï¼ˆç”»å¸ƒ + æ–‡å­—ï¼‰
			   ä¸‹æ–¹ï¼šæ ‡ç­¾å¼é¢æ¿ï¼ˆä¹˜å®¢ / é‡Œç¨‹ / åå¤‡ç®± åˆ‡æ¢ï¼‰
			   ================================================================ */
			body[data-layout="portrait"] #game-root {
				display: flex !important;
				flex-direction: column !important;
				width: 100%;
				height: 100vh;
				height: 100dvh;
				overflow: hidden;
				padding-top: max(var(--da-pad, 6px), env(safe-area-inset-top, 0px)) !important;
				padding-bottom: max(var(--da-pad, 6px), env(safe-area-inset-bottom, 0px)) !important;
			}

			/* ç«–å±ï¼šgame-left æ˜¯ä¸ŠåŠéƒ¨åˆ† */
			body[data-layout="portrait"] #game-left {
				flex-shrink: 0;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			/* ç«–å±ï¼šç”»å¸ƒå›ºå®šé«˜åº¦ï¼ˆç”± --da-canvas-h æ§åˆ¶ï¼‰ */
			body[data-layout="portrait"] #game-canvas {
				height: var(--da-canvas-h, 180px) !important;
				aspect-ratio: unset !important;
				flex-shrink: 0;
				width: 100%;
			}

			/* ç«–å±ï¼šæ–‡æœ¬æ¡† */
			body[data-layout="portrait"] #textArea {
				min-height: 55px !important;
				max-height: 14vh !important;
			}

			/* ç«–å±ï¼šä¹˜å®¢åŒºéšè—ï¼ˆæ•´åˆè¿›é¢æ¿æ ‡ç­¾ï¼‰ */
			body[data-layout="portrait"] #passenger-section {
				display: none !important;
			}

			/* ç«–å±ï¼šå³ä¾§åº“å­˜é¢æ¿å˜ä¸ºåº•éƒ¨æŠ˜å æ ‡ç­¾ */
			body[data-layout="portrait"] #game-right {
				flex: 1;
				min-height: 0;
				display: flex;
				flex-direction: column;
				overflow: hidden;
				border-top: 1px solid #2d2d3d;
				margin-top: var(--da-gap, 4px);
			}

			/* ç«–å±ï¼šåº•éƒ¨æ ‡ç­¾æ  */
			body[data-layout="portrait"] #portrait-tabs {
				display: flex !important;
				flex-shrink: 0;
				background: #0d0d0d;
				border-bottom: 1px solid #2d2d3d;
			}

			body[data-layout="portrait"] #portrait-tabs button {
				flex: 1;
				padding: calc(var(--da-pad, 6px) * 0.6) 0;
				font-size: calc(var(--da-font-base, 13px) * 0.82);
				color: #6b7280;
				background: transparent;
				border: none;
				border-bottom: 2px solid transparent;
				cursor: pointer;
				transition: all 0.2s;
				min-height: 36px;
			}
			body[data-layout="portrait"] #portrait-tabs button.tab-active {
				color: #c41e3a;
				border-bottom-color: #c41e3a;
			}

			/* ç«–å±ï¼šæ ‡ç­¾å†…å®¹åŒºæ»šåŠ¨ */
			body[data-layout="portrait"] .portrait-panel {
				display: none;
				flex: 1;
				overflow-y: auto;
				overflow-x: hidden;
				padding: var(--da-pad, 6px);
			}
			body[data-layout="portrait"] .portrait-panel.panel-active {
				display: flex;
				flex-direction: column;
				gap: var(--da-gap, 4px);
			}

			/* ç«–å±ï¼šé‡‘å¸è¡Œæ”¾è¿›é¢æ¿é¡¶éƒ¨ï¼ˆç”± JS æ§åˆ¶ï¼‰ */
			body[data-layout="portrait"] #gold-row {
				flex-shrink: 0;
			}

			/* éç«–å±æ—¶éšè—ç«–å±ä¸“ç”¨ UI */
			#portrait-tabs { display: none; }

		</style>
	</head>
	<body class="min-h-screen flex flex-col items-center p-5 text-gray-200 font-chinese">
		<!-- ä¸»å¸ƒå±€ï¼šå·¦ä¾§æ¸¸æˆåŒº + å³ä¾§åº“å­˜é¢æ¿ -->
		<div id="game-root" class="w-full max-w-[1200px] flex gap-4">
			<!-- å·¦ä¾§æ¸¸æˆåŒºåŸŸ -->
			<div id="game-left" class="flex-[7] flex flex-col">
				<!-- çš®å¡çŠ¶æ€æ  -->
				<div id="truck-status-bar" class="w-full mb-2 flex gap-2 text-sm">
					<div class="flex-1 bg-[#0d0d0d] border border-gray-700 rounded-lg px-3 py-1.5 flex items-center gap-2">
						<span class="text-gray-400">ç‡ƒæ²¹</span>
						<div class="flex-1 bg-gray-800 rounded-full h-3 overflow-hidden">
							<div id="fuel-bar" class="h-full bg-yellow-500 rounded-full transition-all duration-500" style="width: 100%"></div>
						</div>
						<span id="fuel-text" class="text-yellow-500 text-xs w-12 text-right">100%</span>
					</div>
					<div class="flex-1 bg-[#0d0d0d] border border-gray-700 rounded-lg px-3 py-1.5 flex items-center gap-2">
						<span class="text-gray-400">è€ä¹…</span>
						<div class="flex-1 bg-gray-800 rounded-full h-3 overflow-hidden">
							<div id="durability-bar" class="h-full bg-green-500 rounded-full transition-all duration-500" style="width: 100%"></div>
						</div>
						<span id="durability-text" class="text-green-500 text-xs w-12 text-right">100%</span>
					</div>
					<div class="flex-1 bg-[#0d0d0d] border border-gray-700 rounded-lg px-3 py-1.5 flex items-center gap-2">
						<span class="text-gray-400">èˆ’é€‚</span>
						<div class="flex-1 bg-gray-800 rounded-full h-3 overflow-hidden">
							<div id="comfort-bar" class="h-full bg-blue-400 rounded-full transition-all duration-500" style="width: 100%"></div>
						</div>
						<span id="comfort-text" class="text-blue-400 text-xs w-12 text-right">100%</span>
					</div>
				</div>

				<!-- å›°éš¾æ¨¡å¼æ ‡ç­¾æ  -->
				<div id="hard-mode-bar" class="w-full mb-2 hidden">
					<div class="flex items-center gap-2 flex-wrap bg-[#0d0d0d] border border-red-900/50 rounded-lg px-3 py-1.5">
						<span class="text-red-500 text-xs font-bold flex-shrink-0">â˜  å›°éš¾</span>
						<div id="hard-mode-tags" class="flex gap-1 flex-wrap"></div>
						<span id="hard-mode-points" class="text-xs font-mono text-amber-400 ml-auto flex-shrink-0"></span>
					</div>
				</div>

				<!-- è¡°å˜ debuff æ˜¾ç¤ºæ  -->
				<div id="debuff-bar" class="w-full mb-2 hidden">
					<div class="flex items-center gap-2 flex-wrap bg-[#0d0d0d] border border-orange-900/50 rounded-lg px-3 py-1.5">
						<span class="text-orange-400 text-xs font-bold flex-shrink-0">âš  è¡°å˜</span>
						<div id="debuff-tags" class="flex gap-1 flex-wrap"></div>
					</div>
				</div>

				<!-- æ¸¸æˆç”»é¢ï¼ˆè€ä¹…å˜åŠ¨æ—¶æ–½åŠ  screen-shakeï¼‰ -->
				<div id="game-canvas"
					class="w-full h-[500px] bg-[#0d0d0d] border-[3px] border-[#c41e3a] rounded-xl relative overflow-hidden shadow-[0_0_30px_rgba(196,30,58,0.3)]">

					<div class="w-full h-full relative text-xl leading-none">
						<!-- èƒŒæ™¯æ™¯è§‚å±‚ - ASCII/æ±‰å­—è¿œæ™¯ -->
						<div id="scenery" class="absolute inset-0 pointer-events-none z-[1] opacity-80"
							style="mask-image: linear-gradient(to bottom, transparent 0%, black 15%, black 75%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 15%, black 75%, transparent 100%);"></div>

						<!-- å…¬è·¯ - æ¨ªå‘å•è¡Œï¼Œä»å³å‘å·¦ç§»åŠ¨ -->
						<div id="road" class="absolute w-full h-full flex -bottom-[78%] z-[5]"></div>

						<!-- çº¢è‰²çš®å¡ - åŠ¨æ€ç”Ÿæˆ -->
						<div id="truck"
							class="absolute left-1/4 top-2/3 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center z-10">
							<!-- çš®å¡å†…å®¹ç”±initializeTruck()å‡½æ•°åŠ¨æ€ç”Ÿæˆ -->
						</div>
					</div>
					<button onclick="window.location.href='./index.html'"
						class="absolute top-2.5 left-2.5 px-5 py-2 bg-[#c41e3a]/80 text-white border-none rounded-full cursor-pointer text-sm transition-all duration-300 hover:bg-[#c41e3a]">
						è¿”å›
					</button>
				</div>

				<!-- æ–‡æœ¬å¯¹è¯åŒº -->
				<div id="textArea"
					class="text-area-scroll w-full max-h-[150px] mt-4 p-5 bg-[rgba(20,20,30,0.8)] border-2 border-gray-800 rounded-xl min-h-[150px] text-base leading-relaxed text-gray-400 overflow-auto">
					<p>æ¬¢è¿æ¥åˆ°çº¢è‰²çš®å¡çš„å®‰ä¿ä¹‹æ—…ï¼</p>
					<p>è‡³äºä½ é—®ä¸ºä»€ä¹ˆæ˜¯çº¢è‰²çš®å¡ï¼Ÿä¸ºä»€ä¹ˆæ˜¯å®‰ä¿ï¼Ÿ</p>
					<p>å°ç¼–ä¹Ÿä¸çŸ¥é“å‘¢ï¼</p>
				</div>

				<!-- è½¦ä¸Šæˆå‘˜ï¼ˆæ¸¸æˆç”»é¢ä¸‹æ–¹ï¼Œæ¨ªå‘æ’åˆ—ï¼‰ -->
				<div id="passenger-section" class="w-full mt-3 bg-[#0d0d0d] border border-gray-700 rounded-xl p-3">
					<h2 class="text-sm font-bold text-[#c41e3a] mb-2 flex items-center gap-2">
						è½¦ä¸Šæˆå‘˜
					</h2>
					<div id="passenger-list" class="min-h-[44px] flex flex-row flex-wrap gap-2 items-center text-sm">
						<div class="text-gray-600 text-sm">æš‚æ— ä¹˜å®¢</div>
					</div>
				</div>
			</div>

			<!-- å³ä¾§åº“å­˜é¢æ¿ -->
			<div id="game-right" class="flex-[3] flex flex-col gap-2">

				<!-- ç«–å±ä¸“ç”¨æ ‡ç­¾æ ï¼ˆæ¨ªå±/PC ä¸‹éšè—ï¼‰ -->
				<div id="portrait-tabs">
					<button onclick="switchPortraitTab('stats')" id="ptab-stats" class="tab-active">ğŸ“Š é‡Œç¨‹</button>
					<button onclick="switchPortraitTab('inventory')" id="ptab-inventory">ğŸ“¦ åå¤‡ç®±</button>
					<button onclick="switchPortraitTab('passenger')" id="ptab-passenger">ğŸ‘¥ æˆå‘˜</button>
				</div>

				<!-- æ¨ªå±/PC ç”¨é‡‘å¸è¡Œï¼ˆç«–å±æ—¶ä¼šè¢« JS ç§»å…¥å¯¹åº” panelï¼‰ -->
				<div id="gold-row" class="flex gap-2">
					<div class="flex-1 bg-[#0d0d0d] border border-gray-700 rounded-lg px-3 py-1.5 flex items-center justify-between">
						<span class="text-gray-400 text-sm flex items-center gap-1">é‡‘å¸</span>
						<span id="gold-text" class="text-yellow-400 font-bold text-lg">0</span>
					</div>
					<!-- æ—¶é—´é“¶è¡Œä½™é¢å¾½æ ‡ï¼ˆé»˜è®¤éšè—ï¼Œæ‚¬åœæ—¶é—´å­˜æŠ˜æ—¶æ·¡å…¥ï¼‰ -->
					<div id="time-bank-balance-badge"
						style="display:none;align-items:center;gap:6px;background:#000a1a;border:1px solid #00e5ff60;border-radius:8px;padding:4px 10px;font-size:0.78rem;white-space:nowrap;transition:opacity 0.2s;box-shadow:0 0 10px #00e5ff30;">
						<span style="color:#00e5ff80;">â³é“¶è¡Œ</span>
						<span id="time-bank-balance-text" style="color:#00e5ff;font-weight:700;">0</span>
						<span style="color:#00e5ff80;">ğŸª™</span>
					</div>
					<button onclick="openSettingsModal()" class="bg-[#0d0d0d] border border-gray-700 rounded-lg px-3 py-1.5 text-gray-400 hover:text-white hover:border-gray-500 transition-all" title="è®¾ç½®">
						âš™ï¸
					</button>
					<button onclick="openJourneyLog()" id="journey-log-btn" class="bg-[#0d0d0d] border border-gray-700 rounded-lg px-3 py-1.5 text-gray-400 hover:text-white hover:border-[#c41e3a] hover:text-[#c41e3a] transition-all" title="æ—…é€”å†ç¨‹">
						ğŸ“œ
					</button>
				</div>

				<!-- è¡Œé©¶é‡Œç¨‹è®°å½•è¡¨ + ç«–å±é¢æ¿ï¼šstats -->
				<div id="portrait-panel-stats" class="portrait-panel panel-active">
				<!-- è¡Œé©¶é‡Œç¨‹è®°å½•è¡¨ -->
				<div class="bg-[#0d0d0d] border-[2px] border-[#c41e3a]/60 rounded-xl p-4 shadow-[0_0_15px_rgba(196,30,58,0.15)]">
					<h2 class="text-base font-bold text-[#c41e3a] mb-3 flex items-center gap-2">
						é‡Œç¨‹è®°å½•
					</h2>
					<div class="space-y-2 text-sm">
						<div class="mileage-row flex justify-between items-center text-gray-300">
							<span class="text-gray-400">æœ¬æ¬¡é‡Œç¨‹</span>
							<span id="mileage-current" class="font-bold text-[#c41e3a]">0</span>
							<span class="text-gray-500">km</span>
						</div>
						<div class="mileage-row flex justify-between items-center text-gray-300">
							<span class="text-gray-400">å†å²æœ€é«˜</span>
							<span id="mileage-best" class="font-bold text-amber-400">0</span>
							<span class="text-gray-500">km</span>
						</div>
						<div class="mileage-row flex justify-between items-center text-gray-300">
							<span class="text-gray-400">ç»å†äº‹ä»¶</span>
							<span id="events-count" class="font-bold text-sky-400">0</span>
							<span class="text-gray-500">æ¬¡</span>
						</div>
					</div>
				</div>
				</div><!-- /portrait-panel-stats -->

				<!-- åå¤‡ç®± + ç«–å±é¢æ¿ï¼šinventory -->
				<div id="portrait-panel-inventory" class="portrait-panel flex-1 flex flex-col">
				<!-- åå¤‡ç®± -->
				<div class="bg-[#0d0d0d] border-[3px] border-[#c41e3a] rounded-xl p-4 shadow-[0_0_20px_rgba(196,30,58,0.2)] flex-1 flex flex-col">
					<div class="flex items-center justify-between mb-2">
						<h2 class="text-lg font-bold text-[#c41e3a] flex items-center gap-2">
							åå¤‡ç®±
							<span id="trunk-level-badge" class="text-xs font-normal text-yellow-400 bg-yellow-900/40 px-1.5 py-0.5 rounded border border-yellow-700/50">Lv.1</span>
						</h2>
						<div class="flex bg-gray-800/80 rounded-lg p-0.5 border border-gray-700">
							<button id="inv-tab-normal" onclick="switchInventoryTab('normal')"
								class="px-3 py-1 text-xs font-medium rounded-md transition-all duration-200 bg-[#c41e3a] text-white shadow">
								ğŸ“¦ ç‰©å“
							</button>
							<button id="inv-tab-treasure" onclick="switchInventoryTab('treasure')"
								class="px-3 py-1 text-xs font-medium rounded-md transition-all duration-200 text-gray-400 hover:text-gray-200">
								ğŸ’ çå“
							</button>
						</div>
					</div>
					<div class="flex items-center gap-2 text-sm text-gray-400 mb-3">
						<span>è½½é‡ï¼š</span>
						<div class="flex-1 bg-gray-800 rounded-full h-2.5 overflow-hidden">
							<div id="weight-bar" class="h-full bg-[#c41e3a] rounded-full transition-all duration-500" style="width: 0%"></div>
						</div>
						<span id="weight-text" class="text-xs text-gray-500">0/50</span>
						<button id="trunk-upgrade-btn" onclick="showTrunkUpgradeModal()"
							class="px-2 py-0.5 text-xs bg-blue-900/60 text-blue-300 rounded border border-blue-700/50 hover:bg-blue-800 transition-all flex-shrink-0"
							data-tooltip-html="â¬† å‡çº§åå¤‡ç®±" onmouseenter="showInventoryTooltip(this)" onmouseleave="hideInventoryTooltip()">
							â¬† å‡çº§
						</button>
						<button onclick="openStandaloneCrafting()"
							class="px-2 py-0.5 text-xs bg-yellow-900/60 text-yellow-300 rounded border border-yellow-700/50 hover:bg-yellow-800 transition-all flex-shrink-0"
							title="æ‰“å¼€åˆ¶ä½œå°">
							ğŸ”¨ åˆ¶ä½œ
						</button>
					</div>

					<!-- ç‰©å“åˆ—è¡¨ï¼ˆå®¹å™¨ä¹Ÿå‚ä¸æ‹–æ”¾ï¼Œä¾¿äºåœ¨å ä½æ¡/ç©ºç™½å¤„æ¾æ‰‹ä»å¯æ”¾ä¸‹ï¼‰ -->
					<div id="inventory-list" class="text-area-scroll space-y-1 flex-1 overflow-y-auto pr-1" ondragover="inventoryDragOver(event)" ondrop="inventoryDrop(event)">
						<div class="text-center text-gray-600 text-sm py-8">åå¤‡ç®±ç©ºç©ºå¦‚ä¹Ÿ...</div>
					</div>
				</div>
				</div><!-- /portrait-panel-inventory -->

				<!-- ç«–å±é¢æ¿ï¼špassengerï¼ˆä¹˜å®¢åˆ—è¡¨ä» game-left å¤åˆ¶è¿‡æ¥ï¼‰ -->
				<div id="portrait-panel-passenger" class="portrait-panel">
					<div class="bg-[#0d0d0d] border border-gray-700 rounded-xl p-3">
						<h2 class="text-sm font-bold text-[#c41e3a] mb-2">è½¦ä¸Šæˆå‘˜</h2>
						<div id="passenger-list-portrait" class="min-h-[40px] flex flex-row flex-wrap gap-2 items-center text-sm">
							<div class="text-gray-600 text-sm">æš‚æ— ä¹˜å®¢</div>
						</div>
					</div>
				</div><!-- /portrait-panel-passenger -->

			</div><!-- /game-right -->
		</div><!-- /game-root -->
		<!-- è®¾ç½®é¢æ¿ -->
		<div id="settings-modal" class="fixed inset-0 z-[9998] hidden">
			<div class="absolute inset-0 bg-black/70" onclick="closeSettingsModal()"></div>
			<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-[#111] border-2 border-[#c41e3a] rounded-xl p-6 w-[340px] shadow-[0_0_40px_rgba(196,30,58,0.3)]">
				<div class="flex items-center justify-between mb-5">
					<h2 class="text-lg font-bold text-[#c41e3a] flex items-center gap-2">âš™ï¸ è®¾ç½®</h2>
					<button onclick="closeSettingsModal()" class="text-gray-500 hover:text-white text-xl leading-none">&times;</button>
				</div>
				<!-- ä¸»éŸ³é‡ -->
				<div class="mb-4">
					<div class="flex items-center justify-between mb-1.5">
						<span class="text-sm text-gray-300">ğŸ”Š ä¸»éŸ³é‡</span>
						<span id="master-vol-label" class="text-xs font-mono text-amber-400">100%</span>
					</div>
					<input id="master-vol-slider" type="range" min="0" max="100" value="100"
						class="settings-slider w-full" oninput="onMasterVolumeChange(this.value)">
				</div>
				<!-- ç¯å¢ƒéŸ³ -->
				<div class="mb-4">
					<div class="flex items-center justify-between mb-1.5">
						<span class="text-sm text-gray-300">ğŸŒ§ï¸ ç¯å¢ƒéŸ³</span>
						<span id="ambient-vol-label" class="text-xs font-mono text-amber-400">100%</span>
					</div>
					<input id="ambient-vol-slider" type="range" min="0" max="100" value="100"
						class="settings-slider w-full" oninput="onAmbientVolumeChange(this.value)">
				</div>
				<!-- éŸ³æ•ˆ -->
				<div class="mb-4">
					<div class="flex items-center justify-between mb-1.5">
						<span class="text-sm text-gray-300">ğŸ”” éŸ³æ•ˆ</span>
						<span id="sfx-vol-label" class="text-xs font-mono text-amber-400">100%</span>
					</div>
					<input id="sfx-vol-slider" type="range" min="0" max="100" value="100"
						class="settings-slider w-full" oninput="onSfxVolumeChange(this.value)">
				</div>
				<div class="text-center text-gray-600 text-xs mt-2">éŸ³é‡è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜</div>
				<!-- Debug æ¨¡å¼ï¼ˆä»…ç®€å•æ¨¡å¼ä¸‹å¯è§ï¼‰ -->
				<div id="debug-mode-section" class="border-t border-gray-700 mt-5 pt-4 mb-4 hidden">
					<div class="flex items-center justify-between">
						<span class="text-sm text-gray-300">ğŸ› Debug æ¨¡å¼</span>
						<label class="relative inline-flex items-center cursor-pointer">
							<input id="debug-toggle" type="checkbox" class="sr-only peer" onchange="onDebugToggleChange(this)">
							<div class="w-9 h-5 bg-gray-700 rounded-full peer peer-checked:bg-purple-600 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-full"></div>
						</label>
					</div>
					<div id="debug-toggle-hint" class="text-gray-600 text-xs mt-1">å¼€å¯åå¯åœ¨å·¦ä¸‹è§’æ‰‹åŠ¨è§¦å‘ä»»æ„äº‹ä»¶</div>
				</div>
				<!-- é‡æ–°å¼€å§‹ -->
				<div class="border-t border-gray-700 pt-4">
					<button id="settings-restart-btn" onclick="confirmRestart()" class="w-full px-4 py-2.5 bg-transparent border-2 border-red-900/60 text-red-400 text-sm rounded-lg hover:bg-red-900/30 hover:border-red-700 transition-all">
						ğŸ”„ é‡æ–°å¼€å§‹
					</button>
				</div>
			</div>
		</div>

		<!-- Debug è°ƒè¯•é¢æ¿ï¼ˆå·¦ä¸‹è§’æµ®åŠ¨ï¼‰ -->
		<div id="debug-panel" class="fixed bottom-4 left-4 z-[9997] hidden" style="width:320px;">
			<div class="bg-[#111] border border-purple-800/60 rounded-lg shadow-[0_0_20px_rgba(128,0,255,0.2)] overflow-hidden">
				<!-- æ ‡é¢˜æ ï¼ˆå¯æŠ˜å ï¼‰ -->
				<div class="flex items-center justify-between px-3 py-2 bg-purple-900/30 cursor-pointer select-none" onclick="toggleDebugCollapse()">
					<span class="text-xs font-bold text-purple-300 flex items-center gap-1">ğŸ› Debug æ§åˆ¶å°</span>
					<span id="debug-collapse-icon" class="text-purple-400 text-xs transition-transform">â–¼</span>
				</div>
				<!-- å¯æŠ˜å å†…å®¹ -->
				<div id="debug-body" class="p-3 space-y-3">

					<!-- â”€â”€ äº‹ä»¶è§¦å‘åŒº â”€â”€ -->
					<div class="text-[10px] font-bold text-purple-400 uppercase tracking-wider mb-1">â–¸ è§¦å‘äº‹ä»¶</div>
					<div class="space-y-2">
						<div>
							<input id="debug-event-search" type="text" placeholder="æœç´¢äº‹ä»¶IDæˆ–åç§°â€¦"
								class="w-full bg-[#1a1a2e] border border-gray-700 rounded text-xs text-gray-300 px-2.5 py-1.5 outline-none focus:border-purple-500 transition-colors"
								oninput="onDebugSearchInput(this.value)" onfocus="onDebugSearchInput(this.value)">
							<div id="debug-event-list"
								class="max-h-[240px] overflow-y-auto bg-[#111] border border-gray-700 rounded hidden"
								style="position:fixed;z-index:10000;scrollbar-width:thin;scrollbar-color:#4c1d95 #111;"></div>
						</div>
						<button id="debug-trigger-btn" onclick="debugTriggerEvent()"
							class="w-full px-3 py-1.5 bg-purple-800/50 border border-purple-700/60 text-purple-300 text-xs rounded hover:bg-purple-700/60 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed"
							disabled>
							â–¶ è§¦å‘é€‰ä¸­äº‹ä»¶
						</button>
						<div id="debug-selected-info" class="text-gray-600 text-xs truncate">æœªé€‰ä¸­äº‹ä»¶</div>
					</div>

					<!-- â”€â”€ ç‰©å“æ·»åŠ åŒº â”€â”€ -->
					<div class="border-t border-gray-800 pt-2">
						<div class="text-[10px] font-bold text-green-400 uppercase tracking-wider mb-1.5">â–¸ æ·»åŠ ç‰©å“</div>
						<div class="space-y-2">
							<div>
								<input id="debug-item-search" type="text" placeholder="æœç´¢ç‰©å“åç§°â€¦"
									class="w-full bg-[#0a1a0a] border border-gray-700 rounded text-xs text-gray-300 px-2.5 py-1.5 outline-none focus:border-green-600 transition-colors"
									oninput="onDebugItemSearchInput(this.value)" onfocus="onDebugItemSearchInput(this.value)">
								<div id="debug-item-list"
									class="max-h-[200px] overflow-y-auto bg-[#111] border border-gray-700 rounded hidden"
									style="position:fixed;z-index:10000;scrollbar-width:thin;scrollbar-color:#14532d #111;"></div>
							</div>
							<div class="flex gap-2 items-center">
								<input id="debug-item-qty" type="number" min="1" max="99" value="1"
									class="w-16 bg-[#0a1a0a] border border-gray-700 rounded text-xs text-gray-300 px-2 py-1.5 outline-none focus:border-green-600 text-center"
									placeholder="æ•°é‡">
								<button id="debug-add-item-btn" onclick="debugAddItem()"
									class="flex-1 px-3 py-1.5 bg-green-900/50 border border-green-700/60 text-green-300 text-xs rounded hover:bg-green-700/60 hover:text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed"
									disabled>
									ï¼‹ æ·»åŠ åˆ°åå¤‡ç®±
								</button>
							</div>
							<div id="debug-item-info" class="text-gray-600 text-xs truncate">æœªé€‰ä¸­ç‰©å“</div>
						</div>
					</div>

				</div>
			</div>
		</div>

		<!-- æ¸¸æˆé…ç½®æ–‡ä»¶ -->
		<script src="js/game_config/game-config.js"></script>
		<script src="js/game_config/passenger-config.js"></script>
		<script src="js/game_config/passenger-dialogue-config.js"></script>
		<script src="js/game_config/conditional-stories-config.js"></script>
		<script src="js/game_config/truck-style-config.js"></script>
		<script src="js/game_config/items-config.js"></script>
		<script src="js/game_config/merchant-config.js"></script>
		<!-- ç»“å±€é…ç½® -->
		<script src="js/game_config/endings/endings-config.js"></script>
		<!-- æˆå°±é…ç½® -->
		<script src="js/game_config/achievements-config.js"></script>
		<!-- äº‹ä»¶æ•°æ® -->
		<script src="js/game_config/events/events-encounter.js"></script>
		<script src="js/game_config/events/events-stop.js"></script>
		<script src="js/game_config/events/events-merchant.js"></script>
		<script src="js/game_config/events/events-special.js"></script>
		<script src="js/game_config/events/events-rare.js"></script>
		<script src="js/game_config/events/events-index.js"></script>
		<script src="js/game_config/events/inventory-events.js"></script>
		<!-- æ¸¸æˆç³»ç»Ÿæ¨¡å— -->
		<script src="js/game_system/game-state.js"></script>
		<script src="js/game_system/save-system.js"></script>
		<script src="js/game_system/text-control.js"></script>
		<script src="js/game_system/inventory-system.js"></script>
		<script src="js/game_system/achievement-system.js"></script>
		<!-- æ¸¸æˆæ˜¾ç¤º/æ¼”å‡ºæ¨¡å— -->
		<script src="js/game_show/truck-display.js"></script>
		<script src="js/game_show/event-animation.js"></script>
		<script src="js/game_show/inventory-display.js"></script>
		<script src="js/game_show/journey-log.js"></script>
		<script src="js/game_show/audio.js"></script>
		<script src="js/game_show/road.js"></script>
		<script src="js/game_show/scenery.js"></script>
		<!-- æ¸¸æˆç©æ³•æ¨¡å— -->
		<script src="js/gameplay/minesweeper.js"></script>
		<script src="js/gameplay/event-handler.js"></script>
		<script src="js/gameplay/game-over.js"></script>
		<script src="js/gameplay/text-generation.js"></script>
		<!-- ä¸»æ§åˆ¶è„šæœ¬ -->
		<script src="js/text.js"></script>
		<!-- html2canvasï¼šç”¨äºå†ç¨‹ PNG å¯¼å‡º -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<!-- ç«–å± Tab åˆ‡æ¢ -->
		<script>
			function switchPortraitTab(tab) {
				['stats', 'inventory', 'passenger'].forEach(function(t) {
					var btn = document.getElementById('ptab-' + t);
					var panel = document.getElementById('portrait-panel-' + t);
					if (btn)   btn.classList.toggle('tab-active', t === tab);
					if (panel) panel.classList.toggle('panel-active', t === tab);
				});
			}

			// ç«–å±ä¹˜å®¢åˆ—è¡¨åŒæ­¥ï¼šåœ¨æ›´æ–°ä¹˜å®¢æ˜¾ç¤ºæ—¶åŒæ—¶æ›´æ–°ç«–å±é¢æ¿
			(function() {
				var _orig = null;
				document.addEventListener('DOMContentLoaded', function() {
					// ç›‘å¬ daUpdateï¼Œå¦‚æœå¸ƒå±€åˆ‡æ¢åˆ°ç«–å±åˆ™åŒæ­¥ä¹˜å®¢åˆ—è¡¨
					window.addEventListener('daUpdate', function(e) {
						var layout = e.detail && e.detail.layout;
						if (layout === 'portrait') {
							var src = document.getElementById('passenger-list');
							var dst = document.getElementById('passenger-list-portrait');
							if (src && dst) dst.innerHTML = src.innerHTML;
						}
					});
					// MutationObserverï¼šæ£€æµ‹ passenger-list å†…å®¹å˜åŒ–ï¼ŒåŒæ­¥åˆ°ç«–å±é¢æ¿
					var passengerList = document.getElementById('passenger-list');
					var passengerPortrait = document.getElementById('passenger-list-portrait');
					if (passengerList && passengerPortrait) {
						var obs = new MutationObserver(function() {
							if (document.body.dataset.layout === 'portrait') {
								passengerPortrait.innerHTML = passengerList.innerHTML;
							}
						});
						obs.observe(passengerList, { childList: true, subtree: true, characterData: true });
					}
				});
			})();
		</script>
		<!-- PWA Service Worker æ³¨å†Œ -->
		<script>
			if ('serviceWorker' in navigator) {
				window.addEventListener('load', () => {
					navigator.serviceWorker.register('./sw.js')
						.then(reg => console.log('[PWA] Service Worker å·²æ³¨å†Œ:', reg.scope))
						.catch(err => console.warn('[PWA] Service Worker æ³¨å†Œå¤±è´¥:', err));
				});
			}
		</script>
	</body>
</html>